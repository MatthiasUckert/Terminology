---
output: github_document
always_allow_html: true
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# About the Paper

The following Readme provides additional information and files for the Paper:

***"The Standardization of Accounting Language".***


```{r message=FALSE, warning=FALSE, echo=FALSE}
library(DT)
library(tidyverse)
library(kableExtra)
con <- readr::read_rds("0_data/cls_tp_final.rds") %>%
  dplyr::select(cid, concept_name, tid, term, cat1, cat2, cat3, size, avg_ngram, avg_sim, complex_score) %>%
  dplyr::mutate(cat2 = dplyr::if_else(!is.na(cat2), "GAAP", NA_character_)) %>%
  dplyr::arrange(cid)
openxlsx::write.xlsx(con, "2_output/concept_list.xlsx", TRUE, TRUE)

ter <- readr::read_rds("0_data/tls_tp_final.rds") %>%
  dplyr::select(tid, term, term_raw, cat1, cat2, cat3) %>%
    dplyr::mutate(cat2 = dplyr::if_else(!is.na(cat2), "GAAP", NA_character_)) %>%
  dplyr::arrange(tid)
openxlsx::write.xlsx(ter, "2_output/term_list.xlsx", TRUE, TRUE)
```

# Concept List

The tables below show two example concepts for the paper: ***"The Standardization of Accounting Language".***

The full concept list can be downloaded <a href="2_output/concept_list.xlsx" download="2_output/concept_list.xlsx">here</a>.

The concept list includes the following columns:

| Column          | Description                                                                                                                                                     |
|:-------------------|:---------------------------------------------------|
| `cid`           | The Concept Identifier                                                                                                                                          |
| `tid`           | The Term Identifier                                                                                                                                             |
| `term`          | The standardized Term                                                                                                                                           |
| `cat1`          | **Category 1:** which includes **"FinA"** for Financial Accounting Concepts, **"ManA"** for Managerial Accounting Concepts and **"BusA"** for Business Concepts |
| **`cat2`**      | **Category 2:** Indicator column if the concept is a **GAAP** concept                                                                                           |
| `cat3`          | **Category 3:** which includes **"IS"** for Income Statement Concepts, **"BS"** for Balance Sheet Concepts and **"CF"** for Cash Flow Statement Concepts        |
| `avg_ngram`     | The average N-Gram of all the terms within the concept (i.e. of how many words a term is composed)                                                              |
| `avg_sim`       | Average textual similarity of the terms within the concept                                                                                                      |
| `size`          | The size of the concept (i.e. how many terms are grouped within a concept)                                                                                      |
| `complex_score` | Linear combination of size, avg_ngram and avg_sim (Scaled between 0-1)                                                                                          |

## Concept 1: ABC Costing

```{r message=FALSE, warning=FALSE, echo=FALSE}
con %>%
  dplyr::filter(cid == 1) %>%
  dplyr::select(-concept_name) %>%
  dplyr::mutate(dplyr::across(where(is.character), ~ dplyr::if_else(is.na(.), "", .))) %>%
  knitr::kable() %>%
  kableExtra::kable_paper() %>%
  kableExtra::kable_styling(font_size = 10, full_width = TRUE)
```

## Concept 2: Accounts Payable

```{r message=FALSE, warning=FALSE, echo=FALSE}
con %>%
  dplyr::filter(cid == 2) %>%
  dplyr::select(-concept_name) %>%
  dplyr::mutate(dplyr::across(where(is.character), ~ dplyr::if_else(is.na(.), "", .))) %>%
  knitr::kable() %>%
  kableExtra::kable_paper() %>%
  kableExtra::kable_styling(font_size = 10, full_width = TRUE)
```

# Term List

The table below shows the first ten terms for the paper: ***"The Standardization of Accounting Language".***

The full concept list can be downloaded <a href="2_output/term_list.xlsx" download="2_output/term_list.xlsx">here</a>.

The concept list includes the following columns:

| Column     | Description                                                                                                                                                     |
|:-------------------|:---------------------------------------------------|
| `cid`      | The Concept Identifier                                                                                                                                          |
| `tid`      | The Term Identifier                                                                                                                                             |
| `term`     | The standardized Term                                                                                                                                           |
| `term_raw` | The raw Term                                                                                                                                                    |
| `cat1`     | **Category 1:** which includes **"FinA"** for Financial Accounting Concepts, **"ManA"** for Managerial Accounting Concepts and **"BusA"** for Business Concepts |
| **`cat2`** | **Category 2:** Indicator column if the concept is a **GAAP** concept                                                                                           |
| `cat3`     | **Category 3:** which includes **"IS"** for Income Statement Concepts, **"BS"** for Balance Sheet Concepts and **"CF"** for Cash Flow Statement Concepts        |

```{r message=FALSE, warning=FALSE, echo=FALSE}
ter %>%
  dplyr::mutate(dplyr::across(where(is.character), ~ dplyr::if_else(is.na(.), "", .))) %>%
  dplyr::slice(1:10) %>%
  knitr::kable() %>%
  kableExtra::kable_paper() %>%
  kableExtra::kable_styling(font_size = 10, full_width = TRUE)

```

# Additional Input Lists

::: {style="text-align: justify"}
In order to clean out term and concept list we use several additional input list, the complete pipeline can be seen in the Online Appendix to the paper (section 1).
:::

## British English vs. American English

::: {style="text-align: justify"}
We normalize different varieties of English (i.e., "capitalization" and "capitalisation") by converting all British-English spelling varieties of a word to American-English, we do so by relying on an American/British English Dictionary that contains more than 1,700 different word combinations.
:::

<http://www.tysto.com/uk-us-spelling-list.html>

The full list can be downloaded <a href="2_output/us_uk.xlsx" download="2_output/us_uk.xlsx">here</a>.

```{r echo=FALSE}
openxlsx::read.xlsx("2_output/us_uk.xlsx") %>%
  dplyr::select(-origin) %>%
  dplyr::slice(1:10) %>%
  dplyr::mutate(dplyr::across(where(is.character), ~ dplyr::if_else(is.na(.), "", .))) %>%
  knitr::kable() %>%
  kableExtra::kable_paper() %>%
  kableExtra::kable_styling(font_size = 10, full_width = TRUE)
```

## Stylistic Differences due to hyphenations

::: {style="text-align: justify"}
We account for stylistic differences arising from different hyphenations and the inclusion/exclusion of blank characters (i.e., "non-current assets", "non current assets" and "noncurrent assets"). For this purpose, we build a custom dictionary with more than 300 different split term pairs, and we always convert a word within a term to a split, hyphen-free version (i.e. the word "noncurrent" is converted to "non current").
:::

The full list can be downloaded <a href="2_output/split_terms.xlsx" download="2_output/split_terms.xlsx">here</a>.

```{r echo=FALSE}
openxlsx::read.xlsx("2_output/split_terms.xlsx") %>%
  dplyr::select(-origin) %>%
  dplyr::filter(startsWith(unsplit, "non")) %>%
  dplyr::slice(1:10) %>%
  dplyr::mutate(dplyr::across(where(is.character), ~ dplyr::if_else(is.na(.), "", .))) %>%
  knitr::kable() %>%
  kableExtra::kable_paper() %>%
  kableExtra::kable_styling(font_size = 10, full_width = TRUE)
```

## Stop words

::: {style="text-align: justify"}
We remove terms that equal a stop word (e.g., "and", "or", ...) by complementing Loughran and McDonald's stop word lists with more than 550 custom stop words and phrases (proper names, currencies, stock exchanges, non English terms and geographic regions) we identified from our raw sources.
:::

The full list can be downloaded <a href="2_output/stopwords.xlsx" download="2_output/stopwords.xlsx">here</a>.

```{r echo=FALSE}
openxlsx::read.xlsx("2_output/stopwords.xlsx") %>%
  dplyr::slice(1:10) %>%
  dplyr::mutate(dplyr::across(where(is.character), ~ dplyr::if_else(is.na(.), "", .))) %>%
  knitr::kable() %>%
  kableExtra::kable_paper() %>%
  kableExtra::kable_styling(font_size = 10, full_width = TRUE)
```

## General Language Terms

::: {style="text-align: justify"}
We exclude accounting terms which also have a (different) meaning in *general* language (e.g., "entry") and which we identify with the *2of12inf* dictionary which is a word list that includes more than 80,000 words (See Loughran and McDonald, 2011, 2016).
:::

<http://wordlist.aspell.net/12dicts-readme-r4/>.

# Additional Packages

There are two packages that come with the paper and are free to use.

## Package 1: Search for Multiword Expressions in a Corpus

This is the package we use for retrieving the position of our terms in our annual report corpus.

The package can be wound here: <https://github.com/MatthiasUckert/rTermCount>

## Package 2: Multidimensional Name Matching

This is the package we use for matching our annual report data set to Worldscope

The package can be wound here: <https://github.com/MatthiasUckert/rMatching>
